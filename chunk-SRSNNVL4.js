import{a as V}from"./chunk-6WC5IMLW.js";import{r as X}from"./chunk-E5EVMN27.js";import"./chunk-CLTPZFUW.js";import"./chunk-3GEYRDQM.js";import{J as G,K as J,L as K,M as W,a as Q,b as $,c as N,d as b,e as R,f as A,h as Y,i as H,l as U}from"./chunk-HPISHBPP.js";import{$a as w,Db as x,Fb as B,Ha as n,Ia as r,J as O,Ja as M,L as _,M as I,Na as E,O as f,Ob as j,Oc as v,P as h,Pb as z,Pc as D,Qa as s,Sa as g,Sb as F,V as k,_a as a,ab as p,ga as q,ia as m,ja as y,jb as d,lb as u,wa as S,ya as c,yb as L,zb as T}from"./chunk-SVQ5KEBI.js";var tt=(()=>{class o{item;quantityChange=new O;remove=new O;decreaseQuantity(){this.item.quantity>1&&this.quantityChange.emit(this.item.quantity-1)}increaseQuantity(){this.quantityChange.emit(this.item.quantity+1)}removeItem(){this.remove.emit()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=_({type:o,selectors:[["app-cart-item"]],inputs:{item:"item"},outputs:{quantityChange:"quantityChange",remove:"remove"},decls:25,vars:13,consts:[[1,"cart-item"],[1,"item-content"],[1,"item-image"],[3,"src","alt"],[1,"item-details"],[1,"price"],[1,"quantity-controls"],["mat-icon-button","",3,"disabled","click"],[1,"quantity"],["mat-icon-button","",3,"click"],[1,"subtotal"],["mat-icon-button","","color","warn",1,"remove-button",3,"click"]],template:function(i,t){i&1&&(n(0,"mat-card",0)(1,"div",1)(2,"div",2),M(3,"img",3),r(),n(4,"div",4)(5,"h3"),a(6),r(),n(7,"p",5),a(8),d(9,"number"),r(),n(10,"div",6)(11,"button",7),s("click",function(){return t.decreaseQuantity()}),n(12,"mat-icon"),a(13,"remove"),r()(),n(14,"span",8),a(15),r(),n(16,"button",9),s("click",function(){return t.increaseQuantity()}),n(17,"mat-icon"),a(18,"add"),r()()(),n(19,"p",10),a(20),d(21,"number"),r()(),n(22,"button",11),s("click",function(){return t.removeItem()}),n(23,"mat-icon"),a(24,"delete"),r()()()()),i&2&&(m(3),c("src",t.item.image,q)("alt",t.item.title),m(3),w(t.item.title),m(2),p("$",u(9,7,t.item.price,"1.2-2"),""),m(3),c("disabled",t.item.quantity<=1),m(4),w(t.item.quantity),m(5),p("Subtotal: $",u(21,10,t.item.price*t.item.quantity,"1.2-2"),""))},dependencies:[$,b,v,x],styles:[".cart-item[_ngcontent-%COMP%]{margin-bottom:16px}.item-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;gap:16px}.item-image[_ngcontent-%COMP%]{width:100px;height:100px;min-width:100px;border-radius:4px;overflow:hidden;border:1px solid #eee}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.item-details[_ngcontent-%COMP%]{flex:1}.item-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.1rem;font-weight:500}.item-details[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.1rem;color:#666}.item-details[_ngcontent-%COMP%]   .subtotal[_ngcontent-%COMP%]{margin:8px 0 0;font-weight:500;color:#333}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:8px 0}.quantity-controls[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{min-width:24px;text-align:center;font-size:1.1rem}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f5f5f5}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#999}.remove-button[_ngcontent-%COMP%]{align-self:flex-start}@media (max-width: 768px){.cart-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.cart-item[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{margin-bottom:1rem}.cart-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]{width:100%;margin-top:1rem;justify-content:space-between}}"]})}return o})();function ct(o,C){o&1&&M(0,"mat-progress-spinner",6)}function st(o,C){if(o&1){let e=E();n(0,"app-cart-item",14),s("quantityChange",function(t){let P=f(e).$implicit,nt=g(2);return h(nt.updateQuantity(P,t))})("remove",function(){let l=f(e).$implicit,P=g(2);return h(P.removeItem(l.id))}),r()}if(o&2){let e=C.$implicit;c("item",e)}}function lt(o,C){if(o&1){let e=E();n(0,"div",7)(1,"div",8),S(2,st,1,1,"app-cart-item",9),r(),n(3,"div",10)(4,"mat-card")(5,"mat-card-header")(6,"mat-card-title"),a(7,"Order Summary"),r()(),n(8,"mat-card-content")(9,"div",11)(10,"span"),a(11,"Subtotal"),r(),n(12,"span"),a(13),d(14,"number"),r()(),n(15,"div",11)(16,"span"),a(17,"Shipping"),r(),n(18,"span"),a(19,"Free"),r()(),n(20,"div",12)(21,"span"),a(22,"Total"),r(),n(23,"span"),a(24),d(25,"number"),r()()(),n(26,"mat-card-actions")(27,"button",13),s("click",function(){f(e);let t=g();return h(t.proceedToCheckout())}),a(28," Proceed to Checkout "),r()()()()()}if(o&2){let e=g();m(2),c("ngForOf",e.cartItems),m(11),p("$",u(14,3,e.getTotalPrice(),"1.2-2"),""),m(11),p("$",u(25,6,e.getTotalPrice(),"1.2-2"),"")}}function pt(o,C){o&1&&(n(0,"div",15)(1,"mat-icon"),a(2,"shopping_cart"),r(),n(3,"h2"),a(4,"Your cart is empty"),r(),n(5,"p"),a(6,"Add items to your cart to proceed with checkout"),r(),n(7,"button",16),a(8," Continue Shopping "),r()())}var et=(()=>{class o{cartService;router;snackBar;cartItems=[];totalPrice=0;isLoading=!1;subscriptions=[];constructor(e,i,t){this.cartService=e,this.router=i,this.snackBar=t}ngOnInit(){this.loadCartItems()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadCartItems(){this.isLoading=!0;let e=this.cartService.getCartItems().subscribe({next:t=>{this.cartItems=t,this.isLoading=!1},error:t=>{console.error("Error loading cart items:",t),this.isLoading=!1,this.showError("Error loading cart items")}});this.subscriptions.push(e);let i=this.cartService.getTotalPrice().subscribe({next:t=>{this.totalPrice=t},error:t=>{console.error("Error loading total price:",t),this.showError("Error loading total price")}});this.subscriptions.push(i)}updateQuantity(e,i){if(i<1){this.removeItem(e.id);return}this.isLoading=!0,this.cartService.updateQuantity(e.id,i).subscribe({next:()=>{this.isLoading=!1},error:t=>{console.error("Error updating quantity:",t),this.isLoading=!1,this.showError("Error updating quantity")}})}removeItem(e){this.isLoading=!0,this.cartService.removeFromCart(e).subscribe({next:()=>{this.isLoading=!1},error:i=>{console.error("Error removing item:",i),this.isLoading=!1,this.showError("Error removing item")}})}clearCart(){this.isLoading=!0,this.cartService.clearCart().subscribe({next:()=>{this.isLoading=!1},error:e=>{console.error("Error clearing cart:",e),this.isLoading=!1,this.showError("Error clearing cart")}})}getTotalPrice(){return this.totalPrice}proceedToCheckout(){if(this.cartItems.length===0){this.showError("Your cart is empty");return}this.isLoading=!0;let e={items:this.cartItems.map(i=>({productId:i.id,quantity:i.quantity}))};this.cartService.checkout(e).subscribe({next:i=>{this.isLoading=!1,this.showSuccess("Order placed successfully!"),this.router.navigate(["/orders"])},error:i=>{console.error("Error during checkout:",i),this.isLoading=!1,this.showError("Error processing your order")}})}showError(e){this.snackBar.open(e,"Close",{duration:3e3,panelClass:["error-snackbar"]})}showSuccess(e){this.snackBar.open(e,"Close",{duration:3e3,panelClass:["success-snackbar"]})}static \u0275fac=function(i){return new(i||o)(y(V),y(j),y(G))};static \u0275cmp=_({type:o,selectors:[["app-cart"]],decls:11,vars:4,consts:[[1,"cart-container"],[1,"cart-header"],["mat-button","","color","warn",3,"disabled","click"],["mode","indeterminate","diameter","50",4,"ngIf"],["class","cart-content",4,"ngIf"],["class","empty-cart",4,"ngIf"],["mode","indeterminate","diameter","50"],[1,"cart-content"],[1,"cart-items"],[3,"item","quantityChange","remove",4,"ngFor","ngForOf"],[1,"cart-summary"],[1,"summary-row"],[1,"summary-row","total"],["mat-raised-button","","color","primary",1,"checkout-btn",3,"click"],[3,"item","quantityChange","remove"],[1,"empty-cart"],["mat-raised-button","","color","primary","routerLink","/home"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Shopping Cart"),r(),n(4,"button",2),s("click",function(){return t.clearCart()}),n(5,"mat-icon"),a(6,"delete"),r(),a(7," Clear Cart "),r()(),S(8,ct,1,0,"mat-progress-spinner",3)(9,lt,29,9,"div",4)(10,pt,9,0,"div",5),r()),i&2&&(m(4),c("disabled",t.cartItems.length===0),m(4),c("ngIf",t.isLoading),m(),c("ngIf",!t.isLoading&&t.cartItems.length>0),m(),c("ngIf",!t.isLoading&&t.cartItems.length===0))},dependencies:[L,T,z,Q,b,Y,A,H,R,v,K,tt,x],styles:[".cart-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem}.cart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:500}.cart-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;gap:2rem}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column}.cart-summary[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{position:sticky;top:1rem}.cart-summary[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin-bottom:1rem}.cart-summary[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem;font-size:1rem}.cart-summary[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .summary-row.total[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;padding-top:1rem;margin-top:1rem;border-top:1px solid #eee}.cart-summary[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]{width:100%}.empty-cart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 0;text-align:center}.empty-cart[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:5rem;height:5rem;width:5rem;margin-bottom:2rem;color:#ccc}.empty-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.5rem}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 2rem;color:#666}mat-progress-spinner[_ngcontent-%COMP%]{margin:3rem auto}@media (max-width: 768px){.cart-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.cart-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}}"]})}return o})();var dt=[{path:"",component:et}],Tt=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=I({type:o});static \u0275inj=k({imports:[B,F.forChild(dt),X,N,D,W,U,J]})}return o})();export{Tt as CartModule};
