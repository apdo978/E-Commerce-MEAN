import{a as V}from"./chunk-7GTPN3WU.js";import{e as mt,f as ut,r as gt}from"./chunk-EF3UGG23.js";import"./chunk-ZMX27XMN.js";import{a as R}from"./chunk-X7NW5P62.js";import{a as Y,d as G,g as J,m as K,o as ot,r as nt,u as rt,v as at,w as ct,x as dt}from"./chunk-W2JZTVEG.js";import{J as pt,L as st,M as lt,a as w,c as X,d as Z,f as tt,h as et,j as it}from"./chunk-6GY3LIXI.js";import{$a as b,Ba as $,Bb as O,Eb as Q,Fb as N,Gb as U,Ha as n,Ia as r,Ic as D,Ja as _,L as P,M as B,Nc as I,Oc as q,Pc as m,Qa as C,Rb as W,Sa as y,U as H,V as j,Z as L,_a as c,ab as g,cb as E,db as F,eb as k,ga as z,ia as a,ja as h,jb as M,kb as v,mb as A,p as l,wa as u,ya as d,yb as x,zb as S}from"./chunk-FUN73IET.js";var ft=(()=>{class e{http;constructor(t){this.http=t}getAllProducts(){return this.http.get(`${m.apiUrl}/products/getAllProducts`).pipe(l(t=>t.data.data))}getProductById(t){return this.http.get(`${m.apiUrl}/products/${t}`).pipe(l(i=>i.data.data))}createProduct(t){return this.http.post(`${m.apiUrl}/products/insertProduct`,t).pipe(l(i=>i.data.data))}updateProduct(t,i){return this.http.patch(`${m.apiUrl}/products/${t}`,i).pipe(l(o=>o.data.data))}deleteProduct(t){return this.http.delete(`${m.apiUrl}/products/${t}`).pipe(l(i=>i.data.data))}getProductsByCategory(t){return this.http.get(`${m.apiUrl}/products/category/${t}`).pipe(l(i=>i.data.data))}placeOrder(t){return this.http.post(`${m.apiUrl}/products/order`,t).pipe(l(i=>i.data.data))}getLastOrders(){return this.http.get(`${m.apiUrl}/products/lastOrders`).pipe(l(t=>t.data.data))}static \u0275fac=function(i){return new(i||e)(L(U))};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vt(e,s){if(e&1&&(n(0,"mat-icon"),c(1),r()),e&2){let t=s.$implicit;$(t),a(),g(" ",t," ")}}function xt(e,s){if(e&1&&(n(0,"div",11),u(1,vt,2,3,"mat-icon",12),n(2,"span",13),c(3),r()()),e&2){let t=y();a(),d("ngForOf",t.getRatingStars(t.product.rating.rate)),a(2),g("(",t.product.rating.count,")")}}function St(e,s){if(e&1&&(n(0,"span",14),c(1),r()),e&2){let t=y();a(),g("In Stock (",t.product.qunt,")")}}function Ot(e,s){e&1&&(n(0,"span",15),c(1,"Out of Stock"),r())}var ht=(()=>{class e{cartService;snackBar;authService;product;constructor(t,i,o){this.cartService=t,this.snackBar=i,this.authService=o}addToCart(){console.log("Adding product to cart:",this.product),this.authService.isAuthenticated()?this.cartService.addToCart(this.product).subscribe({next:()=>{this.snackBar.open("Product added to cart","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})},error:t=>{this.snackBar.open("Failed to add product to cart","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),console.error("Error adding to cart:",t)}}):this.snackBar.open("Please log in to add products to the cart","close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})}getRatingStars(t){if(!t)return Array(5).fill("star_border");let i=[],o=Math.floor(t),f=t%1>=.5;for(let p=0;p<o;p++)i.push("star");for(f&&i.push("star_half");i.length<5;)i.push("star_border");return i}static \u0275fac=function(i){return new(i||e)(h(V),h(pt),h(R))};static \u0275cmp=P({type:e,selectors:[["app-product-card"]],inputs:{product:"product"},decls:22,vars:16,consts:[[1,"product-card"],["mat-card-image","",3,"src","alt"],[1,"product-title"],[1,"product-category"],["class","product-rating",4,"ngIf"],[1,"product-description"],[1,"product-price"],[1,"price"],["class","stock",4,"ngIf"],["class","out-of-stock",4,"ngIf"],["mat-raised-button","","color","primary",1,"add-to-cart-btn",3,"disabled","click"],[1,"product-rating"],[3,"class",4,"ngFor","ngForOf"],[1,"rating-count"],[1,"stock"],[1,"out-of-stock"]],template:function(i,o){i&1&&(n(0,"mat-card",0),_(1,"img",1),n(2,"mat-card-content")(3,"h2",2),c(4),r(),n(5,"p",3),c(6),M(7,"titlecase"),r(),u(8,xt,4,2,"div",4),n(9,"p",5),c(10),M(11,"slice"),r(),n(12,"div",6)(13,"span",7),c(14),r(),u(15,St,2,1,"span",8)(16,Ot,2,0,"span",9),r()(),n(17,"mat-card-actions")(18,"button",10),C("click",function(){return o.addToCart()}),n(19,"mat-icon"),c(20,"shopping_cart"),r(),c(21," Add to Cart "),r()()()),i&2&&(a(),d("src",o.product.image||"assets/images/placeholder.png",z)("alt",o.product.title),a(3),b(o.product.title),a(2),b(v(7,10,o.product.category)),a(2),d("ngIf",o.product.rating),a(2),g("",A(11,12,o.product.description,0,100),"..."),a(4),g("$",o.product.price,""),a(),d("ngIf",o.product.qunt>0),a(),d("ngIf",o.product.qunt<=0),a(2),d("disabled",o.product.qunt<=0))},dependencies:[x,S,w,Z,et,tt,it,I,Q,O],styles:[".product-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;transition:transform .2s,box-shadow .2s}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 8px #0000001a}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;object-fit:contain;padding:1rem;background-color:#f8f9fa}mat-card-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem}.product-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin:0;color:#333}.product-category[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin:0}.product-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;color:#ffc107}.product-rating[_ngcontent-%COMP%]   .rating-count[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin-left:.5rem}.product-description[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin:.5rem 0;line-height:1.4}.product-price[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:auto;padding-top:1rem}.product-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:#28a745}.product-price[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]{color:#28a745;font-size:.875rem}.product-price[_ngcontent-%COMP%]   .out-of-stock[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem}mat-card-actions[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:center}mat-card-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:.5rem}"]})}return e})();function wt(e,s){if(e&1&&(n(0,"mat-option",14),c(1),M(2,"titlecase"),r()),e&2){let t=s.$implicit;d("value",t),a(),g(" ",v(2,2,t)," ")}}function bt(e,s){e&1&&(n(0,"div",15),_(1,"mat-spinner"),r())}function Et(e,s){e&1&&(n(0,"div",16)(1,"mat-icon"),c(2,"search_off"),r(),n(3,"p"),c(4,"No products found matching your criteria"),r()())}function Ft(e,s){if(e&1&&_(0,"app-product-card",19),e&2){let t=s.$implicit;d("product",t)}}function kt(e,s){if(e&1&&(n(0,"div",17),u(1,Ft,1,1,"app-product-card",18),r()),e&2){let t=y();a(),d("ngForOf",t.filteredProducts)}}var Ct=(()=>{class e{productService;products=[];filteredProducts=[];categories=[];selectedCategory="";searchQuery="";isLoading=!1;constructor(t){this.productService=t}ngOnInit(){this.loadProducts()}loadProducts(){this.isLoading=!0,this.productService.getAllProducts().subscribe({next:t=>{this.products=t,this.filteredProducts=t,this.categories=[...new Set(t.map(i=>i.category))],this.isLoading=!1},error:t=>{console.error("Error loading products:",t),this.isLoading=!1}})}filterByCategory(t){this.selectedCategory=t,this.applyFilters()}searchProducts(t){this.searchQuery=t,this.applyFilters()}clearFilters(){this.selectedCategory="",this.searchQuery="",this.filteredProducts=this.products}applyFilters(){this.filteredProducts=this.products.filter(t=>{let i=!this.selectedCategory||t.category===this.selectedCategory,o=!this.searchQuery||t.title.toLowerCase().includes(this.searchQuery.toLowerCase())||t.description.toLowerCase().includes(this.searchQuery.toLowerCase());return i&&o})}static \u0275fac=function(i){return new(i||e)(h(ft))};static \u0275cmp=P({type:e,selectors:[["app-home"]],decls:23,vars:6,consts:[[1,"home-container"],[1,"filters-section"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name or description",3,"ngModel","ngModelChange","keyup"],["matSuffix",""],["appearance","outline",1,"category-field"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-button","","color","primary",3,"click"],[1,"products-section"],["class","loading-spinner",4,"ngIf"],["class","no-products",4,"ngIf"],["class","products-grid",4,"ngIf"],[3,"value"],[1,"loading-spinner"],[1,"no-products"],[1,"products-grid"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(i,o){i&1&&(n(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c(4,"Search Products"),r(),n(5,"input",3),k("ngModelChange",function(p){return F(o.searchQuery,p)||(o.searchQuery=p),p}),C("keyup",function(){return o.searchProducts(o.searchQuery)}),r(),n(6,"mat-icon",4),c(7,"search"),r()(),n(8,"mat-form-field",5)(9,"mat-label"),c(10,"Category"),r(),n(11,"mat-select",6),k("ngModelChange",function(p){return F(o.selectedCategory,p)||(o.selectedCategory=p),p}),C("selectionChange",function(p){return o.filterByCategory(p.value)}),n(12,"mat-option",7),c(13,"All Categories"),r(),u(14,wt,3,4,"mat-option",8),r()(),n(15,"button",9),C("click",function(){return o.clearFilters()}),n(16,"mat-icon"),c(17,"clear"),r(),c(18," Clear Filters "),r()(),n(19,"div",10),u(20,bt,2,0,"div",11)(21,Et,5,0,"div",12)(22,kt,2,1,"div",13),r()()),i&2&&(a(5),E("ngModel",o.searchQuery),a(6),E("ngModel",o.selectedCategory),a(3),d("ngForOf",o.categories),a(6),d("ngIf",o.isLoading),a(),d("ngIf",!o.isLoading&&o.filteredProducts.length===0),a(),d("ngIf",!o.isLoading&&o.filteredProducts.length>0))},dependencies:[x,S,Y,G,J,w,ct,rt,ot,nt,I,st,mt,D,ht,O],styles:[".home-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.filters-section[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;align-items:center}.filters-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.filters-section[_ngcontent-%COMP%]   .category-field[_ngcontent-%COMP%]{min-width:200px}.products-section[_ngcontent-%COMP%]{position:relative;min-height:400px}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.no-products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#666;gap:1rem}.no-products[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:2rem;padding:1rem 0}@media (max-width: 768px){.filters-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filters-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]   .category-field[_ngcontent-%COMP%]{width:100%}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))}}"]})}return e})();var Tt=[{path:"",component:Ct}],ae=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=B({type:e});static \u0275inj=j({imports:[N,K,gt,W.forChild(Tt),at,dt,ut,q,lt,X]})}return e})();export{ae as HomeModule};
