import{r as Ct}from"./chunk-E5EVMN27.js";import"./chunk-CLTPZFUW.js";import{a as P}from"./chunk-LUV72TZA.js";import{a as y,b as p,d as E,e as I,h as O,i as k,j as F,l as L,m as lt,n as ct,o as q,p as B,u as G,v as ut,w as z,x as ft}from"./chunk-3GEYRDQM.js";import{J as D,K as ht,L as V,M as _t,a as T,c as pt,d as j,e as R,f as A,h as dt,i as N,l as gt}from"./chunk-HPISHBPP.js";import{Fb as rt,Gb as it,Ha as r,Ia as n,Ja as g,L as M,M as Z,Mb as ot,Ob as S,Pb as w,Pc as mt,Qa as v,Qc as st,Sb as at,Tc as W,U as tt,Uc as C,V as et,Wc as _,Xc as X,Yc as H,Z as nt,_a as i,i as Q,ia as s,ja as d,wa as u,ya as m,zb as b}from"./chunk-SVQ5KEBI.js";var xt=(()=>{class t{http;apiUrl=st.apiUrl;isAuthenticated=new Q(!1);isAuthenticated$=this.isAuthenticated.asObservable();constructor(o){this.http=o,this.checkAuth()}loginWithGoogle(){window.location.href=`${this.apiUrl}/auth/google`}handleAuthCallback(o){localStorage.setItem("token",o),this.isAuthenticated.next(!0)}checkAuth(){let o=localStorage.getItem("token");this.isAuthenticated.next(!!o)}static \u0275fac=function(a){return new(a||t)(nt(it))};static \u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tt(t,l){t&1&&(r(0,"mat-error"),i(1," Email is required "),n())}function jt(t,l){t&1&&(r(0,"mat-error"),i(1," Please enter a valid email address "),n())}function Rt(t,l){t&1&&(r(0,"mat-error"),i(1," Password is required "),n())}function At(t,l){t&1&&(r(0,"mat-error"),i(1," Password must be at least 6 characters "),n())}function Nt(t,l){t&1&&g(0,"mat-spinner",14)}function qt(t,l){t&1&&(r(0,"span"),i(1,"Login"),n())}var vt=(()=>{class t{fb;authService;oauthService;router;snackBar;route;loginForm;loading=!1;formState="";token=null;constructor(o,a,e,c,f,h){this.fb=o,this.authService=a,this.oauthService=e,this.router=c,this.snackBar=f,this.route=h,this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}ngOnInit(){this.route.queryParams.subscribe(o=>{o.token&&(this.loading=!0),this.token=o.token,this.token&&(this.authService.OauthLogin(this.token),this.loading=!1,this.showSuccessAnimation(),this.snackBar.open("Login successful! Welcome ! \u{1F389}","Close",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:"center",verticalPosition:"top"}),setTimeout(()=>{this.router.navigate(["/home"])},1e3))})}onSubmit(){if(this.loginForm.valid){this.loading=!0;let{email:o,password:a}=this.loginForm.value;this.authService.login(o,a).subscribe({next:()=>{this.loading=!1,this.showSuccessAnimation(),this.snackBar.open("Login successful! Welcome ! \u{1F389}","Close",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:"center",verticalPosition:"top"}),setTimeout(()=>{this.router.navigate(["/home"])},1e3)},error:e=>{this.loading=!1,this.showErrorAnimation(),this.snackBar.open(e.error?.message||"Invalid email or password","Close",{duration:3e3,panelClass:["error-snackbar"],horizontalPosition:"center",verticalPosition:"top"})}})}else this.formState="invalid",setTimeout(()=>this.formState="",500)}showSuccessAnimation(){this.formState="success"}showErrorAnimation(){this.formState="invalid",setTimeout(()=>this.formState="",500)}loginWithGoogle(){this.oauthService.loginWithGoogle()}static \u0275fac=function(a){return new(a||t)(d(L),d(P),d(xt),d(S),d(D),d(ot))};static \u0275cmp=M({type:t,selectors:[["app-login"]],decls:32,vars:10,consts:[[1,"login-container"],[1,"login-card"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],[4,"ngIf"],["matInput","","formControlName","password","type","password","placeholder","Enter your password"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","20",4,"ngIf"],[1,"oauth-buttons"],["mat-stroked-button","",1,"google-btn",3,"click"],["src","https://img.icons8.com/?size=30&id=17949&format=png","alt","Google"],[1,"register-link"],["routerLink","/auth/register"],["diameter","20"]],template:function(a,e){if(a&1&&(r(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Login"),n()(),r(5,"mat-card-content")(6,"form",2),v("ngSubmit",function(){return e.onSubmit()}),r(7,"mat-form-field",3)(8,"mat-label"),i(9,"Email"),n(),g(10,"input",4),u(11,Tt,2,0,"mat-error",5)(12,jt,2,0,"mat-error",5),n(),r(13,"mat-form-field",3)(14,"mat-label"),i(15,"Password"),n(),g(16,"input",6),u(17,Rt,2,0,"mat-error",5)(18,At,2,0,"mat-error",5),n(),r(19,"button",7),u(20,Nt,1,0,"mat-spinner",8)(21,qt,2,0,"span",5),n()(),r(22,"div",9)(23,"button",10),v("click",function(){return e.loginWithGoogle()}),g(24,"img",11),r(25,"span"),i(26," \xA0Continue with Google"),n()()(),r(27,"div",12)(28,"p"),i(29,"Don't have an account? "),r(30,"a",13),i(31,"Register"),n()()()()()()),a&2){let c,f,h,x;m("@fadeInOut",void 0),s(),m("@shake",e.formState),s(5),m("formGroup",e.loginForm),s(5),m("ngIf",(c=e.loginForm.get("email"))==null?null:c.hasError("required")),s(),m("ngIf",(f=e.loginForm.get("email"))==null?null:f.hasError("email")),s(5),m("ngIf",(h=e.loginForm.get("password"))==null?null:h.hasError("required")),s(),m("ngIf",(x=e.loginForm.get("password"))==null?null:x.hasError("minlength")),s(),m("disabled",e.loginForm.invalid||e.loading),s(),m("ngIf",e.loading),s(),m("ngIf",!e.loading)}},dependencies:[b,O,y,E,I,k,F,T,j,A,N,R,z,G,q,B,V,w],styles:[".oauth-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin:24px 0;align-items:center}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;width:100%;max-width:280px;height:40px;border:1px solid #e0e0e0;border-radius:4px;background-color:#fff;transition:all .3s ease}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;box-shadow:0 2px 4px #0000001a}.google-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.google-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:24px}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#1976d2}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5;padding:20px}.login-card[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:20px;box-shadow:0 4px 6px #0000001a}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-card-header[_ngcontent-%COMP%]{margin-bottom:20px;justify-content:center}mat-card-title[_ngcontent-%COMP%]{font-size:24px;color:#333}mat-card-actions[_ngcontent-%COMP%]{padding:16px;text-align:center}.text-center[_ngcontent-%COMP%]{text-align:center;margin:0;color:#666}a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[type=submit][_ngcontent-%COMP%]{height:48px;font-size:16px;display:flex;justify-content:center;align-items:center}mat-spinner[_ngcontent-%COMP%]{margin:0 auto}",`.login-container[_ngcontent-%COMP%] {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 80vh;
  padding: 20px;
}

.login-card[_ngcontent-%COMP%] {
  width: 100%;
  max-width: 400px;
  margin: auto;
}

.full-width[_ngcontent-%COMP%] {
  width: 100%;
  margin-bottom: 16px;
}

.text-center[_ngcontent-%COMP%] {
  text-align: center;
  margin: 16px 0;
}

[_nghost-%COMP%]     .success-snackbar {
  background: #4caf50;
  color: white;
}

[_nghost-%COMP%]     .error-snackbar {
  background: #f44336;
  color: white;
}

mat-form-field[_ngcontent-%COMP%] {
  margin-bottom: 16px;
}

button[type="submit"][_ngcontent-%COMP%] {
  margin-top: 16px;
}

.mat-mdc-card-header[_ngcontent-%COMP%] {
  margin-bottom: 16px;
}`],data:{animation:[W("fadeInOut",[X("void",_({opacity:0,transform:"translateY(-20px)"})),H("void <=> *",C("300ms ease-in-out"))]),W("shake",[X("invalid",_({transform:"translateX(0)"})),H("* => invalid",[C("100ms",_({transform:"translateX(-10px)"})),C("100ms",_({transform:"translateX(10px)"})),C("100ms",_({transform:"translateX(-10px)"})),C("100ms",_({transform:"translateX(0)"}))])])]}})}return t})();function Bt(t,l){t&1&&(r(0,"mat-error"),i(1," Name is required "),n())}function Gt(t,l){t&1&&(r(0,"mat-error"),i(1," Name must be at least 3 characters "),n())}function zt(t,l){t&1&&(r(0,"mat-error"),i(1," Email is required "),n())}function Dt(t,l){t&1&&(r(0,"mat-error"),i(1," Please enter a valid email address "),n())}function Vt(t,l){t&1&&(r(0,"mat-error"),i(1," Password is required "),n())}function Wt(t,l){t&1&&(r(0,"mat-error"),i(1," Password must be at least 6 characters "),n())}function Xt(t,l){t&1&&(r(0,"mat-error"),i(1," Please confirm your password "),n())}function Ht(t,l){t&1&&(r(0,"mat-error"),i(1," Passwords do not match "),n())}function Ut(t,l){t&1&&g(0,"mat-spinner",13)}function $t(t,l){t&1&&(r(0,"span"),i(1,"Register"),n())}var Mt=(()=>{class t{fb;authService;router;snackBar;registerForm;isLoading=!1;constructor(o,a,e,c){this.fb=o,this.authService=a,this.router=e,this.snackBar=c,this.registerForm=this.fb.group({name:["",[p.required,p.minLength(3)]],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],confirmPassword:["",[p.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(o){let a=o.get("password"),e=o.get("confirmPassword");a&&e&&a.value!==e.value&&e.setErrors({passwordMismatch:!0})}onSubmit(){if(this.registerForm.valid){this.isLoading=!0;let{name:o,email:a,password:e}=this.registerForm.value;this.authService.register({name:o,email:a,password:e}).subscribe({next:()=>{this.router.navigate(["/auth/login"])},error:c=>{this.isLoading=!1,this.snackBar.open(c.error.data.data||"Wrong Inputs","Close",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:"center",verticalPosition:"top"})}})}}static \u0275fac=function(a){return new(a||t)(d(L),d(P),d(S),d(D))};static \u0275cmp=M({type:t,selectors:[["app-register"]],decls:39,vars:12,consts:[[1,"register-container"],[1,"register-card"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Enter your name"],[4,"ngIf"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],["matInput","","formControlName","password","type","password","placeholder","Enter your password"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirm your password"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","20",4,"ngIf"],[1,"text-center"],["routerLink","/auth/login"],["diameter","20"]],template:function(a,e){if(a&1&&(r(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Register"),n()(),r(5,"mat-card-content")(6,"form",2),v("ngSubmit",function(){return e.onSubmit()}),r(7,"mat-form-field",3)(8,"mat-label"),i(9,"Name"),n(),g(10,"input",4),u(11,Bt,2,0,"mat-error",5)(12,Gt,2,0,"mat-error",5),n(),r(13,"mat-form-field",3)(14,"mat-label"),i(15,"Email"),n(),g(16,"input",6),u(17,zt,2,0,"mat-error",5)(18,Dt,2,0,"mat-error",5),n(),r(19,"mat-form-field",3)(20,"mat-label"),i(21,"Password"),n(),g(22,"input",7),u(23,Vt,2,0,"mat-error",5)(24,Wt,2,0,"mat-error",5),n(),r(25,"mat-form-field",3)(26,"mat-label"),i(27,"Confirm Password"),n(),g(28,"input",8),u(29,Xt,2,0,"mat-error",5)(30,Ht,2,0,"mat-error",5),n(),r(31,"button",9),u(32,Ut,1,0,"mat-spinner",10)(33,$t,2,0,"span",5),n()()(),r(34,"mat-card-actions")(35,"p",11),i(36," Already have an account? "),r(37,"a",12),i(38,"Login here"),n()()()()()),a&2){let c,f,h,x,$,Y,J,K;s(6),m("formGroup",e.registerForm),s(5),m("ngIf",(c=e.registerForm.get("name"))==null?null:c.hasError("required")),s(),m("ngIf",(f=e.registerForm.get("name"))==null?null:f.hasError("minlength")),s(5),m("ngIf",(h=e.registerForm.get("email"))==null?null:h.hasError("required")),s(),m("ngIf",(x=e.registerForm.get("email"))==null?null:x.hasError("email")),s(5),m("ngIf",($=e.registerForm.get("password"))==null?null:$.hasError("required")),s(),m("ngIf",(Y=e.registerForm.get("password"))==null?null:Y.hasError("minlength")),s(5),m("ngIf",(J=e.registerForm.get("confirmPassword"))==null?null:J.hasError("required")),s(),m("ngIf",(K=e.registerForm.get("confirmPassword"))==null?null:K.hasError("passwordMismatch")),s(),m("disabled",e.registerForm.invalid||e.isLoading),s(),m("ngIf",e.isLoading),s(),m("ngIf",!e.isLoading)}},dependencies:[b,O,y,E,I,k,F,T,j,dt,A,N,R,z,G,q,B,V,w],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5;padding:20px}.register-card[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:20px;box-shadow:0 4px 6px #0000001a}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-card-header[_ngcontent-%COMP%]{margin-bottom:20px;justify-content:center}mat-card-title[_ngcontent-%COMP%]{font-size:24px;color:#333}mat-card-actions[_ngcontent-%COMP%]{padding:16px;text-align:center}.text-center[_ngcontent-%COMP%]{text-align:center;margin:0;color:#666}a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[type=submit][_ngcontent-%COMP%]{height:48px;font-size:16px;display:flex;justify-content:center;align-items:center}mat-spinner[_ngcontent-%COMP%]{margin:0 auto}"]})}return t})();var Yt=[{path:"login",component:vt},{path:"register",component:Mt}],_e=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=Z({type:t});static \u0275inj=et({imports:[rt,lt,ct,Ct,at.forChild(Yt),ut,ft,pt,gt,mt,ht,_t]})}return t})();export{_e as AuthModule};
