import{a as U}from"./chunk-6SS7YIIV.js";import{J as A,K as H,L as R,M as Q,a as D,c as $,d as j,e as q,f as z,g as L,i as N,l as V}from"./chunk-HPISHBPP.js";import{$a as M,Cb as I,Db as E,Fb as w,Ha as n,Ia as r,Ja as C,L as O,Na as v,O as x,Oc as k,P as f,Pb as T,Pc as B,Qa as h,Sa as l,Sb as F,_a as o,ab as s,ga as P,gb as y,ia as i,ja as _,jb as g,lb as u,wa as m,ya as c,yb as S,zb as b}from"./chunk-SVQ5KEBI.js";function Y(e,p){e&1&&(n(0,"div",5),C(1,"mat-spinner",6),r())}function G(e,p){if(e&1&&(n(0,"div",13),C(1,"img",14),n(2,"div",15)(3,"h3"),o(4),r(),n(5,"p",16),o(6),r(),n(7,"p",17),o(8),r(),n(9,"p",18),o(10),g(11,"number"),r()()()),e&2){let t=p.$implicit;i(),c("src",t.image,P)("alt",t.title),i(3),M(t.title),i(2),s("Price: $",t.price,""),i(2),s("Quantity: ",t.quantity,""),i(2),s("Subtotal: $",u(11,6,t.price*t.quantity,"1.2-2"),"")}}function J(e,p){if(e&1&&(n(0,"mat-card",9)(1,"mat-card-header")(2,"mat-card-title"),o(3),g(4,"date"),r(),n(5,"mat-card-subtitle"),o(6),r()(),n(7,"mat-card-content")(8,"div",10),m(9,G,12,9,"div",11),r(),n(10,"div",12)(11,"strong"),o(12),g(13,"number"),r()()()()),e&2){let t=p.$implicit,d=l(2);i(3),s(" Order Date: ",u(4,4,t.createdAt,"medium")," "),i(3),s(" Status: ",t.status," "),i(3),c("ngForOf",t.products),i(3),s("Order Total: $",u(13,7,d.calculateOrderTotal(t.products),"1.2-2"),"")}}function K(e,p){if(e&1&&(n(0,"div",7),m(1,J,14,10,"mat-card",8),r()),e&2){let t=l();i(),c("ngForOf",t.orders)}}function W(e,p){e&1&&(n(0,"div",19)(1,"mat-icon"),o(2,"shopping_cart"),r(),n(3,"h3"),o(4,"No Orders Found"),r(),n(5,"p"),o(6,"You haven't placed any orders yet"),r(),n(7,"button",20),o(8," Start Shopping "),r()())}function X(e,p){if(e&1){let t=v();n(0,"div",21)(1,"mat-icon",22),o(2,"error_outline"),r(),n(3,"p"),o(4),r(),n(5,"button",23),h("click",function(){x(t);let a=l();return f(a.ngOnInit())}),o(6," Try Again "),r()()}if(e&2){let t=l();i(4),M(t.error)}}var _t=(()=>{class e{orderService;snackBar;orders=[];loading=!1;error=null;constructor(t,d){this.orderService=t,this.snackBar=d}ngOnInit(){this.loading=!0,this.orderService.getLastOrders().subscribe({next:t=>{this.orders=t||[],this.loading=!1},error:t=>{console.error("Error loading orders:",t),this.error=t.message||"Failed to load orders",this.loading=!1,this.showError("Failed to load orders")}})}showError(t){this.snackBar.open(t,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})}calculateOrderTotal(t){return t.reduce((d,a)=>d+a.price*a.quantity,0)}static \u0275fac=function(d){return new(d||e)(_(U),_(A))};static \u0275cmp=O({type:e,selectors:[["app-orders"]],standalone:!0,features:[y],decls:7,vars:4,consts:[[1,"orders-container"],["class","loading-container",4,"ngIf"],["class","orders-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"orders-list"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"],[1,"products-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"order-total"],[1,"product-item"],[1,"product-image",3,"src","alt"],[1,"product-details"],[1,"price"],[1,"quantity"],[1,"subtotal"],[1,"empty-state"],["mat-raised-button","","color","primary","routerLink","/products"],[1,"error-state"],["color","warn"],["mat-button","","color","primary",3,"click"]],template:function(d,a){d&1&&(n(0,"div",0)(1,"h2"),o(2,"My Orders History"),r(),m(3,Y,2,0,"div",1)(4,K,2,1,"div",2)(5,W,9,0,"div",3)(6,X,7,1,"div",4),r()),d&2&&(i(3),c("ngIf",a.loading),i(),c("ngIf",!a.loading&&a.orders&&a.orders.length>0),i(),c("ngIf",!a.loading&&(!a.orders||a.orders.length===0)),i(),c("ngIf",a.error))},dependencies:[w,S,b,E,I,F,T,Q,R,V,j,z,N,L,q,B,k,$,D,H],styles:[".orders-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px}.orders-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:24px;color:#333}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px 0}.orders-list[_ngcontent-%COMP%]{display:grid;gap:24px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 4px #0000001a}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #eee}.products-list[_ngcontent-%COMP%]{padding:16px}.products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:16px;border-bottom:1px solid #eee}.products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:4px}.products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]{flex:1}.products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:#666}.products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   p.subtotal[_ngcontent-%COMP%]{color:#333;font-weight:500}.order-total[_ngcontent-%COMP%]{padding:16px;text-align:right;border-top:1px solid #eee;font-size:1.1em}.empty-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#666}.error-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}@media (max-width: 768px){.product-item[_ngcontent-%COMP%]{flex-direction:column}.product-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%!important;height:200px!important}}"]})}return e})();export{_t as OrdersComponent};
